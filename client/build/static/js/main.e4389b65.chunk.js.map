{"version":3,"sources":["config/AxiosBase.js","api/index.js","components/post/AddPost.js","hooks/useNewItemMutation.js","components/comment/CommentCard.js","components/comment/Comment.js","components/post/PostCard.js","hooks/useUpdateQueryItem.js","components/common/Loader.js","components/post/PostView.js","views/MainView/MainView.jsx","routes.js","components/common/scrollToTop.js","App.js","helpers/history.js","index.js"],"names":["axios","create","baseURL","process","responseType","getAllPostByUser","queryKey","AxiosBase","get","addPost","data","post","updatePostById","id","patch","AddPost","useState","message","setMessage","userId","addPostFun","queryApi","queryClient","useQueryClient","queryFun","useMutation","onMutate","a","cancelQueries","previousData","getQueryData","setQueryData","old","cloneData","console","log","onError","err","context","onSuccess","onSettled","invalidateQueries","useNewItemMutation","onSubmit","e","preventDefault","postData","_id","Math","floor","random","title","user","content","createdAt","Date","toISOString","like","comment","mutate","className","src","alt","type","value","placeholder","onChange","target","autoFocus","disabled","CommentCard","updatePost","commentData","postId","name","edit","setEdit","editedInput","setEditedInput","isCommentLiked","includes","formatDistance","parseISO","updatedComments","filter","el","length","onClick","prev","CommentView","view","setComment","newComment","map","item","PostCard","userData","showComments","setShowComments","isLiked","firstName","lastName","updatedItemData","reduce","acc","curr","useUpdateQueryItem","Loader","height","style","PostView","useQuery","isLoading","landingPage","routes","path","component","mainView","ScrollToTop","pathname","useLocation","useEffect","window","scrollTo","App","history","createBrowserHistory","QueryClient","setDefaultOptions","refetchOnWindowFocus","refetchOnReconnect","retry","staleTime","ReactDOM","render","forceRefresh","client","document","getElementById"],"mappings":"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","file":"static/js/main.e4389b65.chunk.js","sourcesContent":["import axios from \"axios\";\n\nexport default axios.create({\n  baseURL: process.env.REACT_APP_BASE_URL,\n  responseType: \"json\",\n});\n","import AxiosBase from \"../config/AxiosBase\";\n\nexport const getAllPostByUser = ({ queryKey }) => {\n  return AxiosBase.get(`/user/${queryKey[1]}/posts`);\n};\nexport const addPost = (data) => {\n  return AxiosBase.post(\"/post\", data);\n};\nexport const updatePostById = ({ id, data }) => {\n  return AxiosBase.patch(`/post/${id}`, data);\n};\n","import React, { useState } from \"react\";\nimport { addPost } from \"../../api\";\nimport useNewItemMutation from \"../../hooks/useNewItemMutation\";\n\nexport default function AddPost() {\n  // state\n  const [message, setMessage] = useState(\"\");\n\n  //   static dummy userId of a user in database\n  const userId = \"61a2641458c1d4456e460861\";\n\n  const addPostFun = useNewItemMutation([\"posts\", userId], addPost);\n\n  // on Submit\n  const onSubmit = (e) => {\n    e.preventDefault();\n    if (!message) {\n      return;\n    }\n    const postData = {\n      _id: Math.floor(Math.random() * 100),\n      title: message,\n      user: userId,\n      content: \"\",\n      createdAt: new Date().toISOString(),\n      like: [],\n      comment: [],\n    };\n    addPostFun.mutate(postData);\n    setMessage(\"\");\n  };\n\n  // main return\n  return (\n    <form onSubmit={onSubmit} className=\"addPost\">\n      <div className=\"head\">\n        <div className=\"circle\">\n          <img src=\"/assets/images/profile.jpeg\" alt=\"profile\"></img>\n        </div>\n        <h1>What is on your mind ?</h1>\n      </div>\n      <input\n        type=\"text\"\n        className=\"messageInput\"\n        value={message}\n        placeholder=\"Start writing from here ...\"\n        onChange={(e) => setMessage(e.target.value)}\n        autoFocus\n      ></input>\n      <div className=\"footer\">\n        <button type=\"button\" className=\"photoBtn\">\n          <img src=\"/assets/images/pictureIcon.png\" alt=\"icon\"></img>\n          <span>Photo/Video</span>\n        </button>\n        <button disabled={message === \"\"} className=\"postBtn\" type=\"submit\">\n          Post it\n        </button>\n      </div>\n    </form>\n  );\n}\n","import { useQueryClient, useMutation } from \"react-query\";\n\nexport default function useNewItemMutation(queryKey, queryApi) {\n  const queryClient = useQueryClient();\n  const queryFun = useMutation(queryApi, {\n    // When mutate is called:\n    onMutate: async (data) => {\n      // Cancel any outgoing refetches (so they don't overwrite our optimistic update)\n      await queryClient.cancelQueries(queryKey);\n\n      // Snapshot the previous value\n      const previousData = queryClient.getQueryData(queryKey);\n\n      // Optimistically update to the new value\n      queryClient.setQueryData(queryKey, (old) => {\n        let cloneData = { ...old };\n        cloneData.data.data = [data, ...cloneData.data.data];\n        console.log(\"clone\", cloneData);\n\n        return cloneData;\n      });\n\n      // Return a context object with the snapshotted value\n      return { previousData };\n    },\n\n    // If the mutation fails, use the context returned from onMutate to roll back\n    onError: (err, id, context) => {\n      queryClient.setQueryData(queryKey, context.previousData);\n    },\n    onSuccess: () => {},\n    // Always refetch after error or success:\n    onSettled: () => {\n      queryClient.invalidateQueries(queryKey);\n    },\n  });\n\n  return queryFun;\n}\n","import React, { useState } from \"react\";\nimport { parseISO } from \"date-fns\";\nimport { formatDistance } from \"date-fns/esm\";\nexport default function CommentCard({\n  _id,\n  like,\n  createdAt,\n  message,\n  updatePost,\n  commentData,\n  userId,\n  postId,\n  name,\n}) {\n  console.log(name);\n  // state\n  const [edit, setEdit] = useState(false);\n  const [editedInput, setEditedInput] = useState(message || \"\");\n  // is Comment liked by user\n  const isCommentLiked = like.includes(userId);\n  // on Comment like\n  const onCommentLike = () => {\n    const updatedComments = commentData.filter((el) => {\n      if (el._id === _id) {\n        el.like = isCommentLiked\n          ? el.like.filter((el) => el != userId)\n          : [...el.like, userId];\n      }\n      return el;\n    });\n    updatePost.mutate({\n      id: postId,\n      data: { comment: updatedComments },\n    });\n  };\n\n  // on Commment Edit\n  const onCommentEdit = () => {\n    if (!editedInput) return;\n    const updatedComments = commentData.filter((el) => {\n      if (el._id === _id) {\n        el.message = editedInput;\n      }\n      return el;\n    });\n    updatePost.mutate({\n      id: postId,\n      data: { comment: updatedComments },\n    });\n    setEdit(false);\n  };\n\n  // on Comment Delete\n  const onCommentDelete = () => {\n    const updatedComments = commentData.filter((el) => el._id !== _id);\n\n    updatePost.mutate({\n      id: postId,\n      data: { comment: updatedComments },\n    });\n  };\n\n  // main return\n  return (\n    <div className=\"flexCenter commentSec\">\n      <img\n        className=\"profile\"\n        src=\"/assets/images/profile.jpeg\"\n        alt=\"profile\"\n      />\n      <div className=\"message\">\n        <div className=\"flexBetweenCenter\">\n          <h3>{name}</h3>\n          <p>{formatDistance(new Date(), parseISO(createdAt))} ago</p>\n        </div>\n        <h5>Professional-Student</h5>\n        {edit ? (\n          <form onSubmit={onCommentEdit}>\n            <input\n              className=\"editInput\"\n              type=\"text\"\n              value={editedInput}\n              onChange={(e) => setEditedInput(e.target.value)}\n              autoFocus\n            />\n          </form>\n        ) : (\n          <h4>{message}</h4>\n        )}\n        <div className=\"flexCenter commentActions\">\n          <div className=\"item\">{like.length} Likes</div>\n          <button onClick={onCommentLike}>\n            <img\n              src={\n                isCommentLiked\n                  ? \"/assets/images/heart-like.svg\"\n                  : \"/assets/images/heart.svg\"\n              }\n              alt=\"heart\"\n            ></img>\n            <span>Like</span>\n          </button>\n          <button onClick={() => setEdit((prev) => !prev)}>\n            <img src=\"/assets/images/edit.svg\" alt=\"edit\"></img>\n            <span>Edit</span>\n          </button>\n          <button onClick={onCommentDelete}>\n            <img src=\"/assets/images/trash.svg\" alt=\"trash\"></img>\n            <span>Delete</span>\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React, { useState } from \"react\";\nimport CommentCard from \"./CommentCard\";\n\nexport default function CommentView({\n  view,\n  commentData,\n  userId,\n  updatePost,\n  postId,\n  name,\n}) {\n  // state\n  const [comment, setComment] = useState(\"\");\n\n  // on Comment submit\n  const onCommentSubmit = (e) => {\n    e.preventDefault();\n    if (!comment) return;\n\n    const newComment = {\n      message: comment,\n      _id: Math.floor(Math.random() * 100),\n      createdAt: new Date().toISOString(),\n      like: [],\n    };\n\n    updatePost.mutate({\n      id: postId,\n      data: { comment: [...commentData, newComment] },\n    });\n    setComment(\"\");\n  };\n\n  // main return\n  return (\n    <div className={view ? \"comment show\" : \"comment\"}>\n      <form onSubmit={onCommentSubmit} className=\"addComment\">\n        <img\n          className=\"profile\"\n          src=\"/assets/images/profile.jpeg\"\n          alt=\"profile\"\n        />\n        <input\n          type=\"text\"\n          placeholder=\"Add a comment\"\n          value={comment}\n          onChange={(e) => setComment(e.target.value)}\n          autoFocus\n        />\n      </form>\n      {commentData.length > 0 &&\n        commentData.map((item) => {\n          return (\n            <CommentCard\n              {...item}\n              updatePost={updatePost}\n              userId={userId}\n              postId={postId}\n              commentData={commentData}\n              name={name}\n            />\n          );\n        })}\n    </div>\n  );\n}\n","import React, { useState } from \"react\";\nimport { formatDistance, parseISO } from \"date-fns\";\nimport { updatePostById } from \"../../api\";\nimport useUpdateQueryItem from \"../../hooks/useUpdateQueryItem\";\nimport Comments from \"../comment/Comment\";\nexport default function PostCard({\n  title,\n  like,\n  comment,\n  createdAt,\n  userId,\n  userData,\n  _id,\n}) {\n  // show comment state to render comment sec\n  const [showComments, setShowComments] = useState(false);\n  // is post liked\n  const isLiked = like.includes(userId);\n\n  // user name\n  const { firstName, lastName } = userData;\n  const name = `${firstName} ${lastName}`;\n\n  // mutaion hook for update post\n  const updatePost = useUpdateQueryItem([\"posts\", userId], updatePostById);\n\n  //  on like fun\n  const onLike = () => {\n    const postData = {\n      id: _id,\n      data: {\n        like: isLiked ? like.filter((el) => el != userId) : [...like, userId],\n      },\n    };\n    updatePost.mutate(postData);\n  };\n  // main return\n  return (\n    <div className=\"post\">\n      <div className=\"content\">\n        <div className=\"head\">\n          <div className=\"profile\">\n            <img\n              src=\"/assets/images/profile.jpeg\"\n              alt=\"profile\"\n              className=\"cover\"\n            ></img>\n            <div className=\"right\">\n              <h3>{name}</h3>\n              <div className=\"flexCenter\">\n                <img src=\"/assets/images/marker.svg\"></img>\n                <span>OH , USA</span>\n              </div>\n              <p>{formatDistance(new Date(), parseISO(createdAt))} ago</p>\n            </div>\n          </div>\n          <img\n            src=\"/assets/images/moreIcon.svg\"\n            alt=\"moreIcon\"\n            className=\"pointer\"\n          ></img>\n        </div>\n        <h1>{title}</h1>\n        <div className=\"counter\">\n          <h5>{like.length} Likes</h5>\n          <span>.</span>\n          <h5>{comment.length} comments</h5>\n        </div>\n      </div>\n      <div className=\"footer\">\n        <div className=\"action\">\n          <div onClick={onLike} className=\"flexCenter\">\n            <img\n              src={\n                isLiked\n                  ? \"/assets/images/heart-like.svg\"\n                  : \"/assets/images/heart.svg\"\n              }\n              alt=\"heart\"\n            ></img>\n            <span>Like</span>\n          </div>\n          <div\n            onClick={() => setShowComments((prev) => !prev)}\n            className=\"flexCenter\"\n          >\n            <img src=\"/assets/images/comment.svg\" alt=\"heart\"></img>\n            <span>Comment</span>\n          </div>\n        </div>\n        <Comments\n          view={showComments}\n          commentData={comment}\n          userId={userId}\n          updatePost={updatePost}\n          postId={_id}\n          name={name}\n        />\n      </div>\n    </div>\n  );\n}\n","import { useQueryClient, useMutation } from \"react-query\";\n\nexport default function useUpdateQueryItem(queryKey, queryApi) {\n  const queryClient = useQueryClient();\n  const queryFun = useMutation(queryApi, {\n    // When mutate is called:\n    onMutate: async ({ id, data }) => {\n      // Cancel any outgoing refetches (so they don't overwrite our optimistic update)\n      await queryClient.cancelQueries(queryKey);\n\n      // Snapshot the previous value\n      const previousData = queryClient.getQueryData(queryKey);\n\n      // Optimistically update to the new value\n      queryClient.setQueryData(queryKey, (old) => {\n        let cloneData = { ...old };\n\n        const updatedItemData = cloneData.data.data.reduce((acc, curr) => {\n          if (curr._id === id) {\n            curr = { ...curr, ...data };\n          }\n          return [...acc, curr];\n        }, []);\n\n        console.log(updatedItemData, \"updated\");\n        cloneData.data.data = updatedItemData;\n\n        return cloneData;\n      });\n\n      // Return a context object with the snapshotted value\n      return { previousData };\n    },\n\n    // If the mutation fails, use the context returned from onMutate to roll back\n    onError: (err, id, context) => {\n      queryClient.setQueryData(queryKey, context.previousData);\n    },\n    onSuccess: () => {},\n    // Always refetch after error or success:\n    onSettled: () => {\n      queryClient.invalidateQueries(queryKey);\n    },\n  });\n\n  return queryFun;\n}\n","import React from \"react\";\n\nexport default function Loader({ height = \"70vh\" }) {\n  return (\n    <div className=\"loader\" style={{ height: height }}>\n      <div className=\"sk-chase\">\n        <div className=\"sk-chase-dot\"></div>\n        <div className=\"sk-chase-dot\"></div>\n        <div className=\"sk-chase-dot\"></div>\n        <div className=\"sk-chase-dot\"></div>\n        <div className=\"sk-chase-dot\"></div>\n        <div className=\"sk-chase-dot\"></div>\n      </div>\n    </div>\n  );\n}\n","import React from \"react\";\nimport PostCard from \"./PostCard\";\nimport { useQuery } from \"react-query\";\nimport { getAllPostByUser } from \"../../api\";\nimport Loader from \"../common/Loader\";\nexport default function PostView() {\n  //   static dummy userId\n  const userId = \"61a2641458c1d4456e460861\";\n  const { data, isLoading } = useQuery([\"posts\", userId], getAllPostByUser);\n\n  //   console.log(data, \"data\");\n\n  const postData = data?.data?.data;\n\n  // main return\n  return (\n    <section className=\"postWrapper\">\n      {isLoading && <Loader />}\n      {isLoading ||\n        postData.map((item) => {\n          return <PostCard key={item?._id} {...item} userId={userId} />;\n        })}\n    </section>\n  );\n}\n","import React from \"react\";\nimport AddPost from \"../../components/post/AddPost\";\nimport PostView from \"../../components/post/PostView\";\nimport \"../../assets/css/mainView.css\";\nexport default function landingPage() {\n  // main return\n  return (\n    <div className=\"landingPageWrapper\">\n      <AddPost />\n      <PostView />\n    </div>\n  );\n}\n","import React from \"react\";\nimport { Route, Switch } from \"react-router-dom\";\nimport mainView from \"./views/MainView/MainView\";\n\nexport default function routes() {\n  return (\n    <Switch>\n      <Route path=\"/\" component={mainView} />\n    </Switch>\n  );\n}\n","import { useEffect } from \"react\";\nimport { useLocation } from \"react-router-dom\";\n\nexport default function ScrollToTop() {\n  const { pathname } = useLocation();\n\n  useEffect(() => {\n    window.scrollTo(0, 0);\n  }, [pathname]);\n\n  return null;\n}\n","import React from \"react\";\nimport Routes from \"./routes\";\nimport ScrollToTop from \"./components/common/scrollToTop\";\n\nfunction App() {\n  // main return\n  return (\n    <div className=\"app\">\n      <ScrollToTop />\n      <Routes />\n    </div>\n  );\n}\n\nexport default App;\n","/* eslint-disable import/no-extraneous-dependencies */\nimport { createBrowserHistory } from 'history';\n\nconst history = createBrowserHistory();\nexport default history;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Router } from \"react-router-dom\";\nimport App from \"./App\";\nimport history from \"./helpers/history\";\nimport { QueryClient, QueryClientProvider } from \"react-query\";\n\nimport \"./index.css\";\n\nconst queryClient = new QueryClient();\nqueryClient.setDefaultOptions({\n  refetchOnWindowFocus: false,\n  refetchOnReconnect: false,\n  retry: false,\n  staleTime: 1000 * 6,\n});\n\nReactDOM.render(\n  <Router forceRefresh={true} history={history}>\n    <QueryClientProvider client={queryClient}>\n      <App />\n    </QueryClientProvider>\n  </Router>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}